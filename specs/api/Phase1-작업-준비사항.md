# Phase 1 μ‘μ—… μ¤€λΉ„μ‚¬ν•­ ν™•μΈ

**μƒνƒ**: β… **μ™„λ£** (2026-01-24)

λ¨λ“  Phase 1 μ‘μ—…μ΄ μ™„λ£λμ—μµλ‹λ‹¤. μΈμ¦ λ° μ‚¬μ©μ κ΄€λ¦¬ κΈ°λ¥μ΄ λ¨λ‘ κµ¬ν„λμ—μµλ‹λ‹¤.

---

## β… μμ • μ™„λ£ μ‚¬ν•­

### 1. μ—”λ“ν¬μΈνΈ κ²½λ΅ λ¶μΌμΉ μμ •
- **λ¬Έμ **: `API-κµ¬ν„-μ°μ„ μμ„.md`μ— μλ»λ κ²½λ΅κ°€ μμ—μ
  - β `/auth/password/reset-request`
  - β `/auth/password/reset`
  - β `/auth/password/change`
- **μμ •**: `API-μ—”λ“ν¬μΈνΈ-auth.md`μ™€ μΌμΉν•λ„λ΅ μμ •
  - β… `/auth/forgot-password`
  - β… `/auth/reset-password`
  - β… `/auth/change-password`

### 2. λ„λ½λ μ‘λ‹µ μ½”λ“ μ¶”κ°€
- **μ¶”κ°€λ μ½”λ“**:
  - `USER_NOT_FOUND` - μ‚¬μ©μλ¥Ό μ°Ύμ„ μ μ—†μ (λΉ„λ°€λ²νΈ μ¬μ„¤μ • μ”μ²­ μ‹ μ‚¬μ©)
  - `TOKEN_EXPIRED` - ν† ν°μ΄ λ§λ£λ¨ (ν–¥ν›„ μ‚¬μ©)
  - `ACCOUNT_LOCKED` - κ³„μ •μ΄ μ κΈλ¨ (ν–¥ν›„ μ‚¬μ©)

## β… μ΄λ―Έ μ¤€λΉ„λ μΈν”„λΌ

### 1. μμ΅΄μ„± ν¨ν‚¤μ§€
- β… `python-jose[cryptography]` - JWT ν† ν° μ²λ¦¬
- β… `passlib[bcrypt]` - λΉ„λ°€λ²νΈ ν•΄μ‹±
- β… `fastapi[standard]` - μ›Ή ν”„λ μ„μ›ν¬
- β… `sqlmodel` - ORM
- β… `psycopg[binary]` - PostgreSQL λ“λΌμ΄λ²„

### 2. μ„¤μ • νμΌ
- β… `src/settings.py` - ν™κ²½ λ³€μ κ΄€λ¦¬
  - JWT μ‹ν¬λ¦Ώ ν‚¤ μ„¤μ • (`ACCESS_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`)
  - SMTP μ„¤μ • (μ΄λ©”μΌ λ°μ†΅μ©)
  - ν”„λ΅ νΈμ—”λ“ URL μ„¤μ •

### 3. λ°μ΄ν„°λ² μ΄μ¤
- β… `src/db.py` - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° λ° μ΄κΈ°ν™”
- β… `src/models/user_model.py` - User λ¨λΈ μ •μ μ™„λ£
- β… `src/vos/user_vo.py` - User VO μ •μ μ™„λ£

### 4. κΈ°λ³Έ κµ¬μ΅°
- β… `src/main.py` - FastAPI μ•± μ„¤μ •
- β… `src/codes/response_code.py` - μ‘λ‹µ μ½”λ“ μ •μ
- β… `src/schemas/response_schema.py` - ν‘μ¤€ μ‘λ‹µ μ¤ν‚¤λ§

## β… κµ¬ν„ μ™„λ£λ ν•­λ©

### 1. μΈμ¦ κ΄€λ ¨ νμΌ κµ¬μ΅°
- β… `src/controllers/auth_controller.py` - μΈμ¦ μ»¨νΈλ΅¤λ¬
- β… `src/services/auth_service.py` - μΈμ¦ μ„λΉ„μ¤
- β… `src/dao/user_dao.py` - μ‚¬μ©μ DAO
- β… `src/mappers/user_mapper.py` - User λ¨λΈμ„ UserVOλ΅ λ³€ν™
- β… `src/schemas/auth_schema.py` - μΈμ¦ κ΄€λ ¨ μ¤ν‚¤λ§ (μ”μ²­/μ‘λ‹µ)
- β… `src/messages/auth_message.py` - μΈμ¦ κ΄€λ ¨ λ©”μ‹μ§€

### 2. μΈμ¦ λ―Έλ“¤μ›¨μ–΄/μμ΅΄μ„±
- β… JWT ν† ν° κ²€μ¦ μμ΅΄μ„± ν•¨μ (`src/utils/auth_helper.py`)
- β… ν„μ¬ μ‚¬μ©μ μ¶”μ¶ μμ΅΄μ„± ν•¨μ (`get_current_user`)
- β… κ¶ν• κ²€μ¦ μμ΅΄μ„± ν•¨μ (κΈ°λ³Έ κµ¬ν„ μ™„λ£)

### 3. μ ν‹Έλ¦¬ν‹° ν•¨μ
- β… JWT ν† ν° μƒμ„±/κ²€μ¦ ν•¨μ (`src/utils/jwt_helper.py`)
- β… λΉ„λ°€λ²νΈ ν•΄μ‹±/κ²€μ¦ ν•¨μ (`src/utils/password_helper.py`)
- β… μ΄λ©”μΌ λ°μ†΅ ν•¨μ (`src/utils/email_helper.py`)

### 4. ν™κ²½ λ³€μ μ„¤μ •
- β… `.env` νμΌμ— ν•„μ”ν• λ³€μ μ„¤μ • μ™„λ£
  - `ACCESS_TOKEN_SECRET`
  - `REFRESH_TOKEN_SECRET`
  - `SMTP_HOST`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASSWORD` λ“±

### 5. μ‚¬μ©μ ν”„λ΅ν•„
- β… `src/controllers/user_controller.py` - μ‚¬μ©μ μ»¨νΈλ΅¤λ¬
- β… `src/services/user_service.py` - μ‚¬μ©μ μ„λΉ„μ¤

## π“‹ Phase 1 μ‘μ—… μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ

### ν•„μ ν™•μΈ μ‚¬ν•­
- [x] `.env` νμΌμ— JWT μ‹ν¬λ¦Ώ ν‚¤ μ„¤μ • ν™•μΈ
- [x] `.env` νμΌμ— SMTP μ„¤μ • ν™•μΈ (λΉ„λ°€λ²νΈ μ¬μ„¤μ • μ΄λ©”μΌ λ°μ†΅μ©)
- [x] λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° ν™•μΈ
- [x] `User` λ¨λΈμ΄ λ°μ΄ν„°λ² μ΄μ¤μ— μ •μƒμ μΌλ΅ μƒμ„±λλ”μ§€ ν™•μΈ

### κµ¬ν„ μ™„λ£ μμ„ β…
1. **μΈν”„λΌ μ¤€λΉ„** β…
   - β… JWT μ ν‹Έλ¦¬ν‹° ν•¨μ μ‘μ„±
   - β… λΉ„λ°€λ²νΈ ν•΄μ‹± μ ν‹Έλ¦¬ν‹° ν•¨μ μ‘μ„±
   - β… μ΄λ©”μΌ λ°μ†΅ μ ν‹Έλ¦¬ν‹° ν•¨μ μ‘μ„±

2. **DAO μ‘μ„±** β…
   - β… `UserDAO` μ‘μ„± (μ‚¬μ©μ CRUD, μ΄λ©”μΌλ΅ μ΅°ν λ“±)

3. **μ¤ν‚¤λ§ μ‘μ„±** β…
   - β… `AuthSchema` μ‘μ„± (λ΅κ·ΈμΈ, νμ›κ°€μ…, λΉ„λ°€λ²νΈ λ³€κ²½ μ”μ²­/μ‘λ‹µ)
   - β… `UserSchema` μ‘μ„± (μ‚¬μ©μ ν”„λ΅ν•„ μ΅°ν/μμ •)

4. **μ„λΉ„μ¤ μ‘μ„±** β…
   - β… `AuthService` μ‘μ„± (μΈμ¦ λΉ„μ¦λ‹μ¤ λ΅μ§)
   - β… `UserService` μ‘μ„± (μ‚¬μ©μ ν”„λ΅ν•„ λΉ„μ¦λ‹μ¤ λ΅μ§)

5. **μμ΅΄μ„± μ‘μ„±** β…
   - β… JWT ν† ν° κ²€μ¦ μμ΅΄μ„±
   - β… ν„μ¬ μ‚¬μ©μ μ¶”μ¶ μμ΅΄μ„±

6. **λ§¤νΌ μ‘μ„±** β…
   - β… `UserMapper` μ‘μ„± (User λ¨λΈ β†’ UserVO λ³€ν™)

7. **μ»¨νΈλ΅¤λ¬ μ‘μ„±** β…
   - β… `AuthController` μ‘μ„± (μΈμ¦ μ—”λ“ν¬μΈνΈ)
   - β… `UserController` μ‘μ„± (μ‚¬μ©μ ν”„λ΅ν•„ μ—”λ“ν¬μΈνΈ)

8. **λ©”μ‹μ§€ μ‘μ„±** β…
   - β… `AuthMessage` μ‘μ„± (μ‘λ‹µ λ©”μ‹μ§€)

9. **ν…μ¤νΈ**
   - [ ] κ° μ—”λ“ν¬μΈνΈ ν…μ¤νΈ (μλ™ ν…μ¤νΈ μ™„λ£, μλ™ν™” ν…μ¤νΈλ” ν–¥ν›„)

## β… μ¶”κ°€ ν™•μΈ μ™„λ£ μ‚¬ν•­

### 1. μ΄λ©”μΌ λ°μ†΅ λΌμ΄λΈλ¬λ¦¬
- β… `aiosmtplib` μ‚¬μ©ν•μ—¬ κµ¬ν„ μ™„λ£
- β… SMTP μ„¤μ •μ€ `settings.py`μ— μμ
- β… `src/utils/email_helper.py`μ— μ΄λ©”μΌ λ°μ†΅ ν•¨μ κµ¬ν„ μ™„λ£

### 2. ν† ν° κ°±μ‹  μ—”λ“ν¬μΈνΈ
- β… `POST /auth/refresh` μ—”λ“ν¬μΈνΈ κµ¬ν„ μ™„λ£
- β… Refresh Token μ €μ¥ μ„μΉ: DB (`users.resh_token` μ»¬λΌ)

### 3. λΉ„λ°€λ²νΈ μ¬μ„¤μ • ν† ν°
- β… λΉ„λ°€λ²νΈ μ¬μ„¤μ • ν† ν° μƒμ„± λ° κ²€μ¦ λ΅μ§ κµ¬ν„ μ™„λ£
- β… ν† ν° μ €μ¥ μ„μΉ: JWT ν† ν°μΌλ΅ κ΄€λ¦¬ (DB μ €μ¥ λ¶ν•„μ”)
- β… ν† ν° λ§λ£ μ‹κ°„: 1μ‹κ°„ (κΈ°λ³Έκ°’)

## π“ μ°Έκ³ μ‚¬ν•­

- λ¨λ“  μ‘λ‹µμ€ HTTP 200μΌλ΅ λ°ν™ν•λ©°, μ‹¤μ  μƒνƒλ” `code` ν•„λ“λ΅ κµ¬λ¶„
- JWT ν† ν°μ€ Access Tokenκ³Ό Refresh Token λ‘ κ°€μ§€ μ‚¬μ©
- λΉ„λ°€λ²νΈλ” bcryptλ΅ ν•΄μ‹±ν•μ—¬ μ €μ¥
- μ΄λ©”μΌ μΈμ¦μ€ ν–¥ν›„ κµ¬ν„ μμ • (ν„μ¬λ” `eml_auth_yn` ν•„λ“λ§ μ΅΄μ¬)
